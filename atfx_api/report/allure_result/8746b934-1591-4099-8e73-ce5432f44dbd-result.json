{"name": "cardpay入金：BOS转未处理", "status": "passed", "description": "\n        creditCard入金逻辑如下：\n        根据主账号查询入金接口所需字段，从数据库获取\n        根据交易账号查询交易账号币种，组别，地区等，从数据库获取\n        根据交易账号币种，渠道币种，查询入金汇率。换算入金金额\n        根据数据库查询的渠道手续费charge，换算入金手续费\n        以上查询为每个接口提供了必传参数。入金只需提供对应测试环境的交易账号，主账号即可\n        ", "steps": [{"name": "判断是否需要对字符串进行替换操作，将#key#替换成真实的值", "status": "passed", "steps": [{"name": "字符串中有要替换的mark,从全局变量或者内置方法中替换mark", "status": "passed", "start": 1684047824959, "stop": 1684047824961}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #ENVIRONMENT# 替换为uat", "status": "passed", "start": 1684047824991, "stop": 1684047824991}, {"name": "返回的字符串为str：\nhttps://pj-at20-crm-api-k8s-uat.agile168.com/v1/depositManage/changeStatus", "status": "passed", "start": 1684047824991, "stop": 1684047825018}], "parameters": [{"name": "req_str", "value": "'https://pj-at20-crm-api-k8s-#ENVIRONMENT#.agile168.com/v1/depositManage/changeStatus'"}, {"name": "pattern", "value": "'#(\\w+)#'"}], "start": 1684047824959, "stop": 1684047825018}, {"name": "请求发送以前，对请求数据进行内置方法处理：", "status": "passed", "steps": [{"name": "请求数据json是否有要替换的占位符", "status": "passed", "steps": [{"name": "判断是否需要对字符串进行替换操作，将#key#替换成真实的值", "status": "passed", "steps": [{"name": "字符串中有要替换的mark,从全局变量或者内置方法中替换mark", "status": "passed", "start": 1684047825129, "stop": 1684047825134}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #AREA# 替换为GM", "status": "passed", "start": 1684047825137, "stop": 1684047825137}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #bankRefNo# 替换为CARD1407034466300010", "status": "passed", "start": 1684047825139, "stop": 1684047825139}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #account# 替换为1000015843", "status": "passed", "start": 1684047825140, "stop": 1684047825140}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #fullName# 替换为TEST QUEY2756TYLER", "status": "passed", "start": 1684047825142, "stop": 1684047825142}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #tdaccount# 替换为66300010", "status": "passed", "start": 1684047825143, "stop": 1684047825143}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #tradeAccountType# 替换为mt4", "status": "passed", "start": 1684047825145, "stop": 1684047825145}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #mtName# 替换为mt4_s02", "status": "passed", "start": 1684047825146, "stop": 1684047825146}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #group# 替换为demoforex200", "status": "passed", "start": 1684047825146, "stop": 1684047825146}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #currStatus# 替换为V", "status": "passed", "start": 1684047825148, "stop": 1684047825148}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #currency# 替换为USD", "status": "passed", "start": 1684047825164, "stop": 1684047825164}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #channel_amount# 替换为740", "status": "passed", "start": 1684047825167, "stop": 1684047825167}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #depositRate# 替换为0.9950248756", "status": "passed", "start": 1684047825171, "stop": 1684047825171}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #amount# 替换为744", "status": "passed", "start": 1684047825174, "stop": 1684047825174}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #localCcy# 替换为USD", "status": "passed", "start": 1684047825176, "stop": 1684047825176}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #depositType# 替换为cardpay", "status": "passed", "start": 1684047825177, "stop": 1684047825178}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #fee# 替换为14.88", "status": "passed", "start": 1684047825179, "stop": 1684047825179}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #gen_charge# 替换为2.00%", "status": "passed", "start": 1684047825181, "stop": 1684047825181}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #lastUpdateDate_updata# 替换为2023-05-14 15:03:44", "status": "passed", "start": 1684047825188, "stop": 1684047825188}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #createDomain# 替换为https://pj-at20-client-portal-uat.agile168.com", "status": "passed", "start": 1684047825190, "stop": 1684047825190}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #mtRegion# 替换为SEA", "status": "passed", "start": 1684047825192, "stop": 1684047825192}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #createDate_mt# 替换为2023-05-14T10:03:44.596Z", "status": "passed", "start": 1684047825194, "stop": 1684047825194}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #_id# 替换为646087d0abf34500139b1f17", "status": "passed", "start": 1684047825196, "stop": 1684047825196}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #ID# 替换为6548", "status": "passed", "start": 1684047825210, "stop": 1684047825210}, {"name": "从全局变量类的属性中获取值来替换字符串中的mark：将 #createDate_updata# 替换为2023-05-14 15:03:44", "status": "passed", "start": 1684047825257, "stop": 1684047825257}, {"name": "返回的字符串为str：\n{\n \"entity\": \"GM\",\n \"status\": \"U\",\n \"ids\": [{\n  \"bankRefNo\": \"CARD1407034466300010\",\n  \"mtRefNo\": \"\",\n  \"accountNumber\": 1000015843,\n  \"clnName\": \"TEST QUEY2756TYLER\",\n  \"tradeAccount\": \"66300010\",\n  \"tradeAccountType\": \"mt4\",\n  \"tradeAccountServer\": \"mt4_s02\",\n  \"tradeAccountGroup\": \"demoforex200\",\n  \"currStatus\": \"V\",\n  \"reason\": 0,\n  \"fromCcy\": \"USD\",\n  \"fromAmt\": 740,\n  \"rate\": 0.9950248756,\n  \"mt4Amt\": 744,\n  \"mt4Currency\": \"USD\",\n  \"channel\": \"cardpay\",\n  \"fee\": \"14.88\",\n  \"charge\": \"2.00%\",\n  \"proof\": null,\n  \"remark\": null,\n  \"cancelReason\": \"\",\n  \"failReason\": \"\",\n  \"lastUpdateDate\": \"2023-05-14 15:03:44\",\n  \"updateBy\": \"\",\n  \"processDate\": null,\n  \"processBy\": \"\",\n  \"statusModifier\": \"\",\n  \"createDomain\": \"https://pj-at20-client-portal-uat.agile168.com\",\n  \"isReplenishment\": false,\n  \"mtRegion\": \"SEA\",\n  \"isFromFundAdjust\": false,\n  \"createDate_mt\": \"2023-05-14T10:03:44.596Z\",\n  \"mtRemark\": null,\n  \"isDelete\": false,\n  \"_id\": \"646087d0abf34500139b1f17\",\n  \"ID\": 6548,\n  \"createDate\": \"2023-05-14 15:03:44\",\n  \"bankAcctInfo\": null,\n  \"__v\": 0,\n  \"blackListType\": \"\",\n  \"failReasonTranslate\": null\n }]\n}", "status": "passed", "start": 1684047825257, "stop": 1684047825267}], "parameters": [{"name": "req_str", "value": "'{\n \"entity\": \"#AREA#\",\n \"status\": \"U\",\n \"ids\": [{\n  \"bankRefNo\": \"#bankRefNo#\",\n  \"mtRefNo\": \"\",\n  \"accountNumber\": #account#,\n  \"clnName\": \"#fullName#\",\n  \"tradeAccount\": \"#tdaccount#\",\n  \"tradeAccountType\": \"#tradeAccountType#\",\n  \"tradeAccountServer\": \"#mtName#\",\n  \"tradeAccountGroup\": \"#group#\",\n  \"currStatus\": \"#currStatus#\",\n  \"reason\": 0,\n  \"fromCcy\": \"#currency#\",\n  \"fromAmt\": #channel_amount#,\n  \"rate\": #depositRate#,\n  \"mt4Amt\": #amount#,\n  \"mt4Currency\": \"#localCcy#\",\n  \"channel\": \"#depositType#\",\n  \"fee\": \"#fee#\",\n  \"charge\": \"#gen_charge#\",\n  \"proof\": null,\n  \"remark\": null,\n  \"cancelReason\": \"\",\n  \"failReason\": \"\",\n  \"lastUpdateDate\": \"#lastUpdateDate_updata#\",\n  \"updateBy\": \"\",\n  \"processDate\": null,\n  \"processBy\": \"\",\n  \"statusModifier\": \"\",\n  \"createDomain\": \"#createDomain#\",\n  \"isReplenishment\": false,\n  \"mtRegion\": \"#mtRegion#\",\n  \"isFromFundAdjust\": false,\n  \"createDate_mt\": \"#createDate_mt#\",\n  \"mtRemark\": null,\n  \"isDelete\": false,\n  \"_id\": \"#_id#\",\n  \"ID\": #ID#,\n  \"createDate\": \"#createDate_updata#\",\n  \"bankAcctInfo\": null,\n  \"__v\": 0,\n  \"blackListType\": \"\",\n  \"failReasonTranslate\": null\n }]\n}'"}, {"name": "pattern", "value": "'#(\\w+)#'"}], "start": 1684047825129, "stop": 1684047825267}], "start": 1684047825019, "stop": 1684047825267}, {"name": "该请求需要传递token，从系统变量中获取bos_token：eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoidHlsZXIudGFuZyIsImlhdCI6MTY4NDA0NzgyMCwiZXhwIjoxNjg0MTM0MjIwfQ.zuLYxoRYuBUzD9E5ABGkl_XfLH2nsCDy-9HxfDjmBuQ,请求域名：pj-at20-crm-api-k8s-uat.agile168.com", "status": "passed", "start": 1684047825267, "stop": 1684047825267}], "start": 1684047825018, "stop": 1684047825270}, {"name": "发起http/https请求", "status": "passed", "steps": [{"name": "发起请求，请求url：https://pj-at20-crm-api-k8s-uat.agile168.com/v1/depositManage/changeStatus，\n请求头：{'accept-language': 'zh,zh-CN;q=0.9,en;q=0.8', 'authentication': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50IjoidHlsZXIudGFuZyIsImlhdCI6MTY4NDA0NzgyMCwiZXhwIjoxNjg0MTM0MjIwfQ.zuLYxoRYuBUzD9E5ABGkl_XfLH2nsCDy-9HxfDjmBuQ'},\n请求数据：json:{'entity': 'GM', 'status': 'U', 'ids': [{'bankRefNo': 'CARD1407034466300010', 'mtRefNo': '', 'accountNumber': 1000015843, 'clnName': 'TEST QUEY2756TYLER', 'tradeAccount': '66300010', 'tradeAccountType': 'mt4', 'tradeAccountServer': 'mt4_s02', 'tradeAccountGroup': 'demoforex200', 'currStatus': 'V', 'reason': 0, 'fromCcy': 'USD', 'fromAmt': 740, 'rate': 0.9950248756, 'mt4Amt': 744, 'mt4Currency': 'USD', 'channel': 'cardpay', 'fee': '14.88', 'charge': '2.00%', 'proof': None, 'remark': None, 'cancelReason': '', 'failReason': '', 'lastUpdateDate': '2023-05-14 15:03:44', 'updateBy': '', 'processDate': None, 'processBy': '', 'statusModifier': '', 'createDomain': 'https://pj-at20-client-portal-uat.agile168.com', 'isReplenishment': False, 'mtRegion': 'SEA', 'isFromFundAdjust': False, 'createDate_mt': '2023-05-14T10:03:44.596Z', 'mtRemark': None, 'isDelete': False, '_id': '646087d0abf34500139b1f17', 'ID': 6548, 'createDate': '2023-05-14 15:03:44', 'bankAcctInfo': None, '__v': 0, 'blackListType': '', 'failReasonTranslate': None}]};\ndata:None;\nfiles:None;\nparams:None", "status": "passed", "start": 1684047825279, "stop": 1684047825281}], "start": 1684047825270, "stop": 1684047825400}, {"name": "处理响应数据", "status": "passed", "steps": [{"name": "将响应数据转换为字典类型", "status": "passed", "steps": [{"name": "将响应的json格式数据转换位字典", "status": "passed", "start": 1684047825402, "stop": 1684047825402}, {"name": "最终响应结果为：\n{'data': {'code': 1002, 'message': 'success', 'data': [{'bankRefNo': 'CARD1407034466300010', 'mtRefNo': '', 'accountNumber': 1000015843, 'clnName': 'TESTQUEY2756TYLER', 'tradeAccount': '66300010', 'tradeAccountType': 'mt4', 'tradeAccountServer': 'mt4_s02', 'tradeAccountGroup': 'demoforex200', 'currStatus': 'U', 'reason': 0, 'fromCcy': 'USD', 'fromAmt': 741, 'rate': 0.9950248756, 'mt4Amt': 744.71, 'mt4Currency': 'USD', 'channel': 'cardpay', 'fee': 14.88, 'charge': 2, 'proof': None, 'remark': None, 'cancelReason': '', 'failReason': '', 'lastUpdateDate': '2023-05-14T07:03:45.492Z', 'updateBy': 'tyler.tang', 'processDate': None, 'processBy': '', 'statusModifier': 'tyler.tang', 'createDomain': 'https://pj-at20-client-portal-uat.agile168.com', 'isReplenishment': False, 'mtRegion': 'SEA', 'isFromFundAdjust': False, 'createDate_mt': '2023-05-14T10:03:44.596Z', 'mtRemark': None, 'isDelete': False, '_id': '646087d0abf34500139b1f17', 'ID': 6548, 'createDate': '2023-05-14T07:03:44.596Z', 'bankAcctInfo': None, 'creditCardDepositID': 778, '__v': 0}]}, 'statusCode': 200, 'message': 'Success'}", "status": "passed", "start": 1684047825402, "stop": 1684047825403}], "parameters": [{"name": "resp_decrypt", "value": "None"}, {"name": "resp", "value": "<Response [201]>"}], "start": 1684047825400, "stop": 1684047825403}, {"name": "断言响应数据", "status": "passed", "steps": [{"name": "判断断言字符串中是否有要替换的占位符", "status": "passed", "steps": [{"name": "判断是否需要对字符串进行替换操作，将#key#替换成真实的值", "status": "passed", "steps": [{"name": "字符串中没有要替换的mark", "status": "passed", "start": 1684047825408, "stop": 1684047825410}, {"name": "返回的字符串为str：\n{\"message\": \"Success\"}", "status": "passed", "start": 1684047825410, "stop": 1684047825411}], "parameters": [{"name": "req_str", "value": "'{\"message\": \"Success\"}'"}, {"name": "pattern", "value": "'#(\\w+)#'"}], "start": 1684047825408, "stop": 1684047825411}, {"name": "断言响应结果中的 message字段的值 Success 是否与预期 Success 一致", "status": "passed", "start": 1684047825413, "stop": 1684047825427}], "parameters": [{"name": "resp_dict", "value": "{'data': {'code': 1002, 'message': 'success', 'data': [{'bankRefNo': 'CARD1407034466300010', 'mtRefNo': '', 'accountNumber': 1000015843, 'clnName': 'TESTQUEY2756TYLER', 'tradeAccount': '66300010', 'tradeAccountType': 'mt4', 'tradeAccountServer': 'mt4_s02', 'tradeAccountGroup': 'demoforex200', 'currStatus': 'U', 'reason': 0, 'fromCcy': 'USD', 'fromAmt': 741, 'rate': 0.9950248756, 'mt4Amt': 744.71, 'mt4Currency': 'USD', 'channel': 'cardpay', 'fee': 14.88, 'charge': 2, 'proof': None, 'remark': None, 'cancelReason': '', 'failReason': '', 'lastUpdateDate': '2023-05-14T07:03:45.492Z', 'updateBy': 'tyler.tang', 'processDate': None, 'processBy': '', 'statusModifier': 'tyler.tang', 'createDomain': 'https://pj-at20-client-portal-uat.agile168.com', 'isReplenishment': False, 'mtRegion': 'SEA', 'isFromFundAdjust': False, 'createDate_mt': '2023-05-14T10:03:44.596Z', 'mtRemark': None, 'isDelete': False, '_id': '646087d0abf34500139b1f17', 'ID': 6548, 'createDate': '2023-05-14T07:03:44.596Z', 'bankAcctInfo': None, 'creditCardDepositID': 778, '__v': 0}]}, 'statusCode': 200, 'message': 'Success'}"}, {"name": "excepted_actions", "value": "'{\"message\": \"Success\"}'"}], "start": 1684047825406, "stop": 1684047825427}], "start": 1684047825405, "stop": 1684047825427}], "start": 1684047825400, "stop": 1684047825427}], "start": 1684047824957, "stop": 1684047825427, "uuid": "151e5279-49e2-472e-9d82-732b5fd52e2a", "historyId": "afadc8f2dac929e1a8cf1aa87e612d82", "testCaseId": "479f102cd743e74fc041431c1b4174cd", "fullName": "testcase.test_creditcard_deposit_gm.TestCreditCard#test_card_pay_deposit", "labels": [{"name": "suite", "value": "creditCard入金"}, {"name": "tag", "value": "flaky(reruns=2, reruns_delay=2)"}, {"name": "tag", "value": "high"}, {"name": "tag", "value": "@pytest.mark.usefixtures('deposit_withdrawal_info')"}, {"name": "tag", "value": "run(order=0)"}, {"name": "parentSuite", "value": "testcase"}, {"name": "subSuite", "value": "TestCreditCard"}, {"name": "host", "value": "SZVDI043"}, {"name": "thread", "value": "64096-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase.test_creditcard_deposit_gm"}]}